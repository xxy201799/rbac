2020-05-17 00:03:03,934 [HikariPool-1 housekeeper] WARN  [com.zaxxer.hikari.pool.HikariPool] HikariPool.java:787 - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m40s778ms101µs830ns).
2020-05-17 00:03:03,994 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 00:03:04,013 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 00:03:04,031 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 00:03:04,069 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 11:44:05,196 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 11:44:05,223 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 11:44:05,228 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 11:44:05,230 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 11:44:05,231 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 11:44:05,269 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 11:44:05,270 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 11:44:08,086 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 11:44:08,556 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 11:44:08,565 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 11:44:09,414 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 11:44:09,443 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 11:44:09,475 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 19ms. Found 0 JPA repository interfaces.
2020-05-17 11:44:09,791 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 11:44:09,793 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 11:44:09,869 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 11:44:10,048 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 11:44:10,104 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 11:44:10,870 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 11:44:11,794 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 11:44:11,819 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:44:11,820 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:44:11,821 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:44:11,821 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:44:11,822 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 11:44:11,822 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:44:11,822 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:44:11,822 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:44:11,823 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 11:44:11,823 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:44:11,823 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:44:11,824 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:44:11,913 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 11:44:12,138 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:44:12,827 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:44:12,846 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:44:12,854 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@51e8d066' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:44:12,862 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:44:12,876 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:44:12,956 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 11:44:12,957 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 11:44:14,365 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 11:44:14,653 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 11:44:15,396 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 11:44:15,685 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 11:44:15,689 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 11:44:16,359 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 11:44:16,440 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 11:44:18,658 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 11:44:18,675 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 11:44:20,036 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 11:44:20,404 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 11:44:20,405 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 11:44:20,462 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@752180c4
2020-05-17 11:44:20,650 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 11:44:20,677 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 11:44:20,678 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 11:44:20,679 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 11:44:20,679 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 11:44:20,680 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 11:44:20,681 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 11:44:20,683 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 11:44:21,586 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 11:44:21,586 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 11:44:22,158 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 11:44:23,037 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 11:44:25,693 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6c3830ed, org.springframework.security.web.context.SecurityContextPersistenceFilter@4ac2b4c6, org.springframework.security.web.header.HeaderWriterFilter@1a1d7832, org.springframework.security.web.authentication.logout.LogoutFilter@6c1d25fa, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@372c428, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@50165a6d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@7569bc9f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@32a541a8, org.springframework.security.web.session.SessionManagementFilter@38f7a20, org.springframework.security.web.access.ExceptionTranslationFilter@7c070e78, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@52b2c255]
2020-05-17 11:44:26,496 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 11:44:26,563 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 11:44:26,739 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 26.024 seconds (JVM running for 28.683)
2020-05-17 11:44:27,681 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 11:44:27,716 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 11:44:27,778 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 11:44:27,792 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 11:47:00,336 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 11:47:00,350 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 11:47:00,355 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 11:47:00,357 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 11:47:00,358 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 11:47:00,379 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 11:47:00,380 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 11:47:01,240 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 11:47:01,503 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 11:47:01,510 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 11:47:02,057 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 11:47:02,061 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 11:47:02,104 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 29ms. Found 0 JPA repository interfaces.
2020-05-17 11:47:02,121 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 11:47:02,123 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 11:47:02,143 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 8ms. Found 0 Redis repository interfaces.
2020-05-17 11:47:02,278 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 11:47:02,305 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 11:47:02,506 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 11:47:02,846 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 11:47:02,868 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:47:02,869 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:47:02,869 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:47:02,869 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:47:02,870 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 11:47:02,871 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:47:02,871 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:47:02,871 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:47:02,872 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 11:47:02,872 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:47:02,872 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:47:02,873 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:47:02,899 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 11:47:03,053 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:47:03,487 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:47:03,500 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:47:03,505 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7e38e254' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:47:03,520 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:47:03,533 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:47:03,597 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 11:47:03,598 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 11:47:04,658 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 11:47:04,874 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 11:47:05,246 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 11:47:05,518 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 11:47:05,526 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 11:47:07,263 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 11:47:07,302 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 11:47:08,714 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 11:47:08,726 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 11:47:09,637 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 11:47:09,901 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 11:47:09,902 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 11:47:09,935 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@542aba71
2020-05-17 11:47:10,121 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 11:47:10,136 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 11:47:10,136 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 11:47:10,137 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 11:47:10,137 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 11:47:10,137 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 11:47:10,138 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 11:47:10,139 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 11:47:10,892 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 11:47:10,893 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 11:47:11,470 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 11:47:12,309 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 11:47:14,850 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6b127d96, org.springframework.security.web.context.SecurityContextPersistenceFilter@55704859, org.springframework.security.web.header.HeaderWriterFilter@42ff5c92, org.springframework.security.web.authentication.logout.LogoutFilter@2324e26c, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@70bca957, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5e388a77, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@41b6ae51, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5a4929f5, org.springframework.security.web.session.SessionManagementFilter@1b261005, org.springframework.security.web.access.ExceptionTranslationFilter@1a5b8f77, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@58b2c0b4]
2020-05-17 11:47:15,583 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 11:47:15,635 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 11:47:15,788 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 17.921 seconds (JVM running for 19.896)
2020-05-17 11:49:12,554 [HikariPool-1 housekeeper] WARN  [com.zaxxer.hikari.pool.HikariPool] HikariPool.java:787 - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=2m5s188ms511µs372ns).
2020-05-17 11:49:18,278 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 11:49:18,299 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 11:49:18,316 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 11:49:18,324 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 11:54:36,071 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 11:54:36,089 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 11:54:36,094 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 11:54:36,097 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 11:54:36,099 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 11:54:36,114 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 11:54:36,114 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 11:54:36,972 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 11:54:37,297 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 11:54:37,303 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 11:54:37,877 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 11:54:37,881 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 11:54:37,923 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 25ms. Found 0 JPA repository interfaces.
2020-05-17 11:54:37,943 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 11:54:37,946 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 11:54:37,966 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 7ms. Found 0 Redis repository interfaces.
2020-05-17 11:54:38,139 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 11:54:38,173 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 11:54:38,369 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 11:54:38,775 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 11:54:38,797 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:54:38,798 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:54:38,798 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:54:38,799 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:54:38,799 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 11:54:38,800 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:54:38,800 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:54:38,800 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:54:38,801 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 11:54:38,801 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:54:38,801 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:54:38,801 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:54:38,828 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 11:54:39,032 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:54:39,491 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:54:39,507 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:54:39,512 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4e10a320' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:54:39,529 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:54:39,543 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:54:39,621 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 11:54:39,622 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 11:54:40,357 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 11:54:40,503 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 11:54:40,995 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 11:54:41,236 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 11:54:41,243 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 11:54:42,857 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 11:54:42,889 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 11:54:44,545 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 11:54:44,557 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 11:54:45,602 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 11:54:45,934 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 11:54:45,934 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 11:54:45,961 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@3f1485c3
2020-05-17 11:54:46,163 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 11:54:46,192 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 11:54:46,192 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 11:54:46,193 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 11:54:46,193 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 11:54:46,194 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 11:54:46,194 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 11:54:46,197 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 11:54:47,014 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 11:54:47,014 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 11:54:47,593 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 11:54:48,347 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 11:54:50,413 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@74c0da40, org.springframework.security.web.context.SecurityContextPersistenceFilter@13cdfd26, org.springframework.security.web.header.HeaderWriterFilter@2c174215, org.springframework.security.web.authentication.logout.LogoutFilter@3dc455f6, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@50ea4eaa, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@619d0977, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4015ebf1, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6413fef3, org.springframework.security.web.session.SessionManagementFilter@8922006, org.springframework.security.web.access.ExceptionTranslationFilter@73b8c79b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@306cb0a0]
2020-05-17 11:54:51,327 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 11:54:51,398 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 11:54:51,574 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 17.794 seconds (JVM running for 20.215)
2020-05-17 11:55:03,923 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 11:55:03,949 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 11:55:03,968 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 11:55:03,974 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 11:56:21,011 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 11:56:21,029 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 11:56:21,033 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 11:56:21,036 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 11:56:21,037 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 11:56:21,056 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 11:56:21,057 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 11:56:21,905 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 11:56:22,150 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 11:56:22,156 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 11:56:22,657 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 11:56:22,660 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 11:56:22,694 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 23ms. Found 0 JPA repository interfaces.
2020-05-17 11:56:22,717 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 11:56:22,719 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 11:56:22,736 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 11:56:22,863 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 11:56:22,886 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 11:56:23,062 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 11:56:23,369 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 11:56:23,391 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:56:23,391 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:56:23,392 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:56:23,392 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 11:56:23,393 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 11:56:23,393 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:56:23,393 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:56:23,393 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:56:23,394 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 11:56:23,394 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:56:23,394 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:56:23,394 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 11:56:23,420 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 11:56:23,644 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:56:24,116 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:56:24,127 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:56:24,132 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@19f497aa' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:56:24,148 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:56:24,165 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 11:56:24,244 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 11:56:24,244 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 11:56:25,066 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 11:56:25,214 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 11:56:25,462 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 11:56:25,706 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 11:56:25,712 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 11:56:26,547 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 11:56:26,580 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 11:56:28,048 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 11:56:28,059 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 11:56:28,996 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 11:56:29,223 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 11:56:29,224 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 11:56:29,253 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@42e20500
2020-05-17 11:56:29,423 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 11:56:29,441 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 11:56:29,442 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 11:56:29,443 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 11:56:29,443 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 11:56:29,444 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 11:56:29,444 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 11:56:29,446 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 11:56:30,152 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 11:56:30,153 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 11:56:30,658 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 11:56:31,423 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 11:56:33,486 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2927d781, org.springframework.security.web.context.SecurityContextPersistenceFilter@1e512b3, org.springframework.security.web.header.HeaderWriterFilter@56e32a23, org.springframework.security.web.authentication.logout.LogoutFilter@490f4b14, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@23216e17, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@26b3eb48, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8c68f7f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1fae279e, org.springframework.security.web.session.SessionManagementFilter@3db2388e, org.springframework.security.web.access.ExceptionTranslationFilter@3467d540, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4431233f]
2020-05-17 11:56:34,204 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 11:56:34,264 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 11:56:34,410 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.791 seconds (JVM running for 17.553)
2020-05-17 11:56:38,165 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 11:56:38,188 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 11:56:38,208 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 11:56:38,217 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 13:39:20,132 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 13:39:20,147 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 13:39:20,152 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 13:39:20,155 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 13:39:20,157 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 13:39:20,172 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 13:39:20,173 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 13:39:21,474 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 13:39:21,714 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 13:39:21,722 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 13:39:22,561 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:39:22,569 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 13:39:22,720 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 78ms. Found 0 JPA repository interfaces.
2020-05-17 13:39:22,761 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:39:22,765 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 13:39:22,814 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 9ms. Found 0 Redis repository interfaces.
2020-05-17 13:39:23,040 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 13:39:23,102 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 13:39:23,445 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 13:39:23,944 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 13:39:23,993 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:39:23,994 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:39:23,995 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:39:23,996 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:39:23,997 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 13:39:23,998 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:39:23,999 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:39:24,000 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:39:24,001 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 13:39:24,002 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:39:24,003 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:39:24,004 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:39:24,045 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 13:39:24,352 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:39:24,931 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:39:24,945 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:39:24,951 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@55296b50' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:39:24,963 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:39:24,978 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:39:25,081 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 13:39:25,083 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 13:39:25,938 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 13:39:26,076 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 13:39:26,322 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 13:39:26,507 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 13:39:26,513 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 13:39:28,049 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 13:39:28,080 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 13:39:29,543 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 13:39:29,553 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:39:30,545 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 13:39:30,823 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:39:30,824 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:39:30,850 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@2afe825a
2020-05-17 13:39:31,041 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 13:39:31,067 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 13:39:31,069 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 13:39:31,070 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 13:39:31,071 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 13:39:31,072 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 13:39:31,074 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 13:39:31,078 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 13:39:31,802 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:39:31,803 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:39:32,254 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 13:39:32,977 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 13:39:35,505 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@63b85d97, org.springframework.security.web.context.SecurityContextPersistenceFilter@50165a6d, org.springframework.security.web.header.HeaderWriterFilter@6345dc06, org.springframework.security.web.authentication.logout.LogoutFilter@7ed6e557, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@7b1bb01c, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@172ca6a, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@758e6acd, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@50cadbae, org.springframework.security.web.session.SessionManagementFilter@c50503e, org.springframework.security.web.access.ExceptionTranslationFilter@272cec71, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@18f8c76d]
2020-05-17 13:39:36,393 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 13:39:36,448 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 13:39:36,595 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 19.392 seconds (JVM running for 21.028)
2020-05-17 13:39:36,777 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 13:39:36,812 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:39:36,847 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 13:39:36,857 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 13:40:53,907 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 13:40:53,921 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 13:40:53,925 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 13:40:53,927 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 13:40:53,928 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 13:40:53,944 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 13:40:53,945 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 13:40:54,825 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 13:40:55,109 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 13:40:55,115 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 13:40:55,592 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:40:55,596 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 13:40:55,639 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 27ms. Found 0 JPA repository interfaces.
2020-05-17 13:40:55,656 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:40:55,658 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 13:40:55,673 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 13:40:55,798 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 13:40:55,823 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 13:40:56,024 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 13:40:56,389 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 13:40:56,414 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:40:56,414 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:40:56,415 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:40:56,415 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:40:56,416 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 13:40:56,416 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:40:56,417 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:40:56,417 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:40:56,418 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 13:40:56,418 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:40:56,418 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:40:56,418 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:40:56,448 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 13:40:56,605 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:40:57,064 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:40:57,075 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:40:57,079 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@304068' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:40:57,089 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:40:57,105 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:40:57,183 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 13:40:57,183 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 13:40:57,930 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 13:40:58,103 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 13:40:58,432 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 13:40:58,639 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 13:40:58,645 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 13:40:59,218 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 13:40:59,251 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 13:41:00,700 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 13:41:00,712 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:41:01,651 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 13:41:01,895 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:41:01,896 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:41:01,920 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@1979d616
2020-05-17 13:41:02,104 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 13:41:02,124 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 13:41:02,125 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 13:41:02,125 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 13:41:02,126 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 13:41:02,126 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 13:41:02,126 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 13:41:02,128 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 13:41:02,964 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:41:02,965 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:41:03,510 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 13:41:04,256 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 13:41:06,361 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5c98fe31, org.springframework.security.web.context.SecurityContextPersistenceFilter@1b3ee7f3, org.springframework.security.web.header.HeaderWriterFilter@19eaab0b, org.springframework.security.web.authentication.logout.LogoutFilter@4c36416b, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@3a7c75d9, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1c1f3950, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@218da1f9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6385b96c, org.springframework.security.web.session.SessionManagementFilter@238869e8, org.springframework.security.web.access.ExceptionTranslationFilter@7f2a5d5f, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@26b6454d]
2020-05-17 13:41:07,143 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 13:41:07,198 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 13:41:07,353 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.796 seconds (JVM running for 18.002)
2020-05-17 13:41:07,550 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 13:41:07,576 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:41:07,602 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 13:41:07,608 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 13:52:57,028 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 13:52:57,043 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 13:52:57,048 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 13:52:57,051 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 13:52:57,052 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 13:52:57,067 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 13:52:57,068 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 13:52:57,957 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 13:52:58,238 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 13:52:58,244 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 13:52:58,712 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:52:58,715 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 13:52:58,750 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 24ms. Found 0 JPA repository interfaces.
2020-05-17 13:52:58,768 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:52:58,770 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 13:52:58,792 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 8ms. Found 0 Redis repository interfaces.
2020-05-17 13:52:58,926 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 13:52:58,955 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 13:52:59,122 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 13:52:59,428 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 13:52:59,448 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:52:59,448 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:52:59,449 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:52:59,449 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:52:59,449 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 13:52:59,450 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:52:59,450 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:52:59,450 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:52:59,451 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 13:52:59,451 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:52:59,451 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:52:59,451 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:52:59,475 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 13:52:59,627 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:53:00,062 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:53:00,072 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:53:00,076 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@78e387d6' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:53:00,090 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:53:00,102 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:53:00,175 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 13:53:00,175 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 13:53:00,846 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 13:53:00,965 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 13:53:01,235 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 13:53:01,419 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 13:53:01,425 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 13:53:02,045 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 13:53:02,077 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 13:53:03,493 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 13:53:03,506 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:53:04,351 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 13:53:04,575 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:53:04,575 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:53:04,603 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@72e5f018
2020-05-17 13:53:04,771 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 13:53:04,789 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 13:53:04,789 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 13:53:04,790 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 13:53:04,791 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 13:53:04,791 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 13:53:04,792 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 13:53:04,794 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 13:53:05,578 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:53:05,579 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:53:06,071 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 13:53:06,905 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 13:53:08,776 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@58a2c6a, org.springframework.security.web.context.SecurityContextPersistenceFilter@1c68601b, org.springframework.security.web.header.HeaderWriterFilter@63031e98, org.springframework.security.web.authentication.logout.LogoutFilter@45db8ba6, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@1bae8e5e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@412b4aed, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@12b79055, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@260f8704, org.springframework.security.web.session.SessionManagementFilter@10fc01e0, org.springframework.security.web.access.ExceptionTranslationFilter@301da01d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@75952723]
2020-05-17 13:53:09,484 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 13:53:09,530 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 13:53:09,654 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.02 seconds (JVM running for 16.661)
2020-05-17 13:53:09,831 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 13:53:09,854 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:53:09,880 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 13:53:09,886 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 13:53:45,517 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 13:53:45,531 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 13:53:45,535 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 13:53:45,538 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 13:53:45,539 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 13:53:45,557 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 13:53:45,557 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 13:53:46,381 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 13:53:46,638 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 13:53:46,644 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 13:53:47,069 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:53:47,072 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 13:53:47,113 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 27ms. Found 0 JPA repository interfaces.
2020-05-17 13:53:47,130 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:53:47,132 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 13:53:47,146 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 13:53:47,266 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 13:53:47,296 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 13:53:47,509 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 13:53:47,821 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 13:53:47,840 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:53:47,841 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:53:47,841 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:53:47,841 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:53:47,842 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 13:53:47,843 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:53:47,843 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:53:47,844 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:53:47,844 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 13:53:47,844 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:53:47,845 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:53:47,845 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:53:47,867 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 13:53:48,039 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:53:48,469 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:53:48,484 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:53:48,490 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6f1d799' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:53:48,507 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:53:48,523 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:53:48,599 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 13:53:48,599 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 13:53:49,337 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 13:53:49,464 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 13:53:49,770 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 13:53:49,992 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 13:53:49,997 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 13:53:50,622 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 13:53:50,655 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 13:53:52,096 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 13:53:52,111 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:53:53,014 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 13:53:53,259 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:53:53,260 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:53:53,287 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@4158b72f
2020-05-17 13:53:53,494 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 13:53:53,518 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 13:53:53,519 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 13:53:53,519 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 13:53:53,520 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 13:53:53,521 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 13:53:53,522 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 13:53:53,524 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 13:53:54,298 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:53:54,299 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:53:54,794 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 13:53:55,628 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 13:53:57,579 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2a9eb44d, org.springframework.security.web.context.SecurityContextPersistenceFilter@3fb8e614, org.springframework.security.web.header.HeaderWriterFilter@46a6b8d6, org.springframework.security.web.authentication.logout.LogoutFilter@41b6ae51, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@1a7f6678, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@13e9a2f2, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6565691a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@46135aba, org.springframework.security.web.session.SessionManagementFilter@504ed038, org.springframework.security.web.access.ExceptionTranslationFilter@12f826c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7bc3e36b]
2020-05-17 13:53:58,322 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 13:53:58,378 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 13:53:58,582 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.306 seconds (JVM running for 16.895)
2020-05-17 13:53:58,925 [main] ERROR [org.hibernate.hql.internal.ast.ErrorTracker] ErrorTracker.java:62 - line 1:81: unexpected token: =
2020-05-17 13:53:58,933 [main] ERROR [org.hibernate.hql.internal.ast.ErrorTracker] ErrorTracker.java:57 - line 1:81: unexpected token: =
antlr.NoViableAltException: unexpected token: =
	at org.hibernate.hql.internal.antlr.HqlBaseParser.fromClassOrOuterQueryPath(HqlBaseParser.java:1972)
	at org.hibernate.hql.internal.antlr.HqlBaseParser.fromRange(HqlBaseParser.java:1499)
	at org.hibernate.hql.internal.antlr.HqlBaseParser.fromClause(HqlBaseParser.java:1343)
	at org.hibernate.hql.internal.antlr.HqlBaseParser.selectFrom(HqlBaseParser.java:1063)
	at org.hibernate.hql.internal.antlr.HqlBaseParser.queryRule(HqlBaseParser.java:748)
	at org.hibernate.hql.internal.antlr.HqlBaseParser.selectStatement(HqlBaseParser.java:319)
	at org.hibernate.hql.internal.antlr.HqlBaseParser.statement(HqlBaseParser.java:198)
	at org.hibernate.hql.internal.ast.QueryTranslatorImpl.parse(QueryTranslatorImpl.java:290)
	at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:189)
	at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:144)
	at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:113)
	at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:73)
	at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:155)
	at org.hibernate.internal.AbstractSharedSessionContract.getQueryPlan(AbstractSharedSessionContract.java:600)
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:709)
	at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:368)
	at com.sun.proxy.$Proxy148.createQuery(Unknown Source)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:314)
	at com.sun.proxy.$Proxy148.createQuery(Unknown Source)
	at com.xxy.rbac_cloud_service_platform.repository.rule.RdbcRuleRepositoryAdapter.getModel(RdbcRuleRepositoryAdapter.java:68)
	at com.xxy.rbac_cloud_service_platform.repository.rule.RdbcRuleRepositoryAdapter.getEntity(RdbcRuleRepositoryAdapter.java:96)
	at com.xxy.rbac_cloud_service_platform.repository.rule.RdbcRuleRepositoryAdapter.remove(RdbcRuleRepositoryAdapter.java:86)
	at com.xxy.rbac_cloud_service_platform.repository.rule.RdbcRuleRepositoryAdapter.delete(RdbcRuleRepositoryAdapter.java:163)
	at com.xxy.rbac_cloud_service_platform.repository.rule.RdbcRuleRepositoryAdapter$$FastClassBySpringCGLIB$$8217752c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:685)
	at com.xxy.rbac_cloud_service_platform.repository.rule.InMemFlowRuleStore$$EnhancerBySpringCGLIB$$1c6a347c.delete(<generated>)
	at com.xxy.RuleTest.testSaveMertic(RuleTest.java:41)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
2020-05-17 13:53:58,983 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 13:53:59,008 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:53:59,035 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 13:53:59,042 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 13:54:33,560 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 13:54:33,575 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 13:54:33,579 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 13:54:33,582 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 13:54:33,583 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 13:54:33,597 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 13:54:33,597 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 13:54:34,430 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 13:54:34,697 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 13:54:34,701 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 13:54:35,171 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:54:35,174 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 13:54:35,214 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 29ms. Found 0 JPA repository interfaces.
2020-05-17 13:54:35,231 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:54:35,233 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 13:54:35,248 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 13:54:35,374 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 13:54:35,403 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 13:54:35,607 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 13:54:35,974 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 13:54:35,989 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:54:35,990 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:54:35,990 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:54:35,990 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:54:35,991 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 13:54:35,991 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:54:35,992 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:54:35,992 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:54:35,992 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 13:54:35,992 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:54:35,992 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:54:35,993 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:54:36,012 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 13:54:36,172 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:54:36,602 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:54:36,611 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:54:36,615 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@69d2fb0a' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:54:36,626 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:54:36,638 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:54:36,714 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 13:54:36,715 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 13:54:37,467 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 13:54:37,616 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 13:54:37,920 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 13:54:38,151 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 13:54:38,158 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 13:54:39,293 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 13:54:39,327 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 13:54:40,836 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 13:54:40,847 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:54:41,680 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 13:54:41,921 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:54:41,921 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:54:41,946 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@466d6ea5
2020-05-17 13:54:42,108 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 13:54:42,124 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 13:54:42,125 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 13:54:42,126 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 13:54:42,126 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 13:54:42,127 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 13:54:42,127 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 13:54:42,130 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 13:54:42,858 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:54:42,858 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:54:43,346 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 13:54:44,132 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 13:54:46,157 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1828069a, org.springframework.security.web.context.SecurityContextPersistenceFilter@234ad505, org.springframework.security.web.header.HeaderWriterFilter@2620d0dc, org.springframework.security.web.authentication.logout.LogoutFilter@3c42dc9f, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@2c73a332, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4655e059, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5e8ec0d9, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3e2afba0, org.springframework.security.web.session.SessionManagementFilter@716205f9, org.springframework.security.web.access.ExceptionTranslationFilter@448861e5, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@54b48b]
2020-05-17 13:54:46,889 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 13:54:46,948 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 13:54:47,086 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.843 seconds (JVM running for 17.661)
2020-05-17 13:54:50,428 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 13:54:50,446 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:54:50,469 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 13:54:50,476 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 13:55:19,793 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 13:55:19,809 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 13:55:19,813 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 13:55:19,816 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 13:55:19,817 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 13:55:19,838 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 13:55:19,839 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 13:55:20,770 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 13:55:21,077 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 13:55:21,085 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 13:55:21,620 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:55:21,624 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 13:55:21,665 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 27ms. Found 0 JPA repository interfaces.
2020-05-17 13:55:21,683 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:55:21,685 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 13:55:21,701 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 13:55:21,814 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 13:55:21,841 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 13:55:22,012 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 13:55:22,312 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 13:55:22,347 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:55:22,347 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:55:22,347 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:55:22,348 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:55:22,349 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 13:55:22,349 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:55:22,349 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:55:22,349 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:55:22,349 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 13:55:22,349 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:55:22,350 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:55:22,350 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:55:22,370 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 13:55:22,556 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:55:22,977 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:55:22,990 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:55:22,995 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@70777a65' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:55:23,009 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:55:23,025 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:55:23,099 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 13:55:23,100 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 13:55:23,826 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 13:55:23,959 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 13:55:24,317 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 13:55:24,503 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 13:55:24,507 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 13:55:25,159 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 13:55:25,190 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 13:55:26,645 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 13:55:26,656 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:55:27,521 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 13:55:27,762 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:55:27,763 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:55:27,786 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@245a90b1
2020-05-17 13:55:27,938 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 13:55:27,955 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 13:55:27,955 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 13:55:27,956 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 13:55:27,956 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 13:55:27,957 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 13:55:27,957 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 13:55:27,959 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 13:55:28,670 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:55:28,670 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:55:29,127 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 13:55:29,982 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 13:55:31,959 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d6c4c43, org.springframework.security.web.context.SecurityContextPersistenceFilter@76b17a78, org.springframework.security.web.header.HeaderWriterFilter@5a558335, org.springframework.security.web.authentication.logout.LogoutFilter@1cc771ae, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@398f6f04, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@28a210fb, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@63031e98, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5cb9ef8a, org.springframework.security.web.session.SessionManagementFilter@165ec33, org.springframework.security.web.access.ExceptionTranslationFilter@476e4bb0, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7a6ef10b]
2020-05-17 13:55:32,685 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 13:55:32,727 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 13:55:32,850 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.368 seconds (JVM running for 17.163)
2020-05-17 13:55:33,803 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 13:55:33,824 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:55:33,845 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 13:55:33,851 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 13:56:47,756 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 13:56:47,770 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 13:56:47,774 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 13:56:47,777 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 13:56:47,778 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 13:56:47,796 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 13:56:47,797 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 13:56:48,704 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 13:56:48,983 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 13:56:48,989 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 13:56:49,493 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:56:49,496 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 13:56:49,530 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 22ms. Found 0 JPA repository interfaces.
2020-05-17 13:56:49,548 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:56:49,549 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 13:56:49,570 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 8ms. Found 0 Redis repository interfaces.
2020-05-17 13:56:49,700 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 13:56:49,728 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 13:56:49,911 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 13:56:50,207 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 13:56:50,236 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:56:50,236 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:56:50,236 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:56:50,237 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:56:50,237 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 13:56:50,238 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:56:50,238 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:56:50,239 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:56:50,239 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 13:56:50,239 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:56:50,239 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:56:50,240 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:56:50,262 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 13:56:50,415 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:56:50,825 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:56:50,838 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:56:50,843 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@6480a063' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:56:50,853 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:56:50,865 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:56:50,929 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 13:56:50,930 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 13:56:51,645 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 13:56:51,786 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 13:56:52,056 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 13:56:52,256 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 13:56:52,263 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 13:56:52,775 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 13:56:52,807 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 13:56:54,147 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 13:56:54,158 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:56:55,078 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 13:56:55,323 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:56:55,324 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:56:55,348 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@6b174aa3
2020-05-17 13:56:55,512 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 13:56:55,533 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 13:56:55,534 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 13:56:55,535 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 13:56:55,535 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 13:56:55,536 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 13:56:55,537 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 13:56:55,538 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 13:56:56,341 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:56:56,342 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:56:56,847 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 13:56:57,641 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 13:56:59,496 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@57e273e0, org.springframework.security.web.context.SecurityContextPersistenceFilter@274d10aa, org.springframework.security.web.header.HeaderWriterFilter@5da5bd9e, org.springframework.security.web.authentication.logout.LogoutFilter@7f2c0470, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@6291d30, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@78f3ce56, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@33093469, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3396d2a6, org.springframework.security.web.session.SessionManagementFilter@569242a8, org.springframework.security.web.access.ExceptionTranslationFilter@29d578de, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3057a923]
2020-05-17 13:57:00,247 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 13:57:00,294 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 13:57:00,448 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.051 seconds (JVM running for 16.796)
2020-05-17 13:57:01,038 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 13:57:01,057 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:57:01,078 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 13:57:01,085 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 13:57:48,526 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 13:57:48,540 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 13:57:48,545 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 13:57:48,547 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 13:57:48,548 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 13:57:48,563 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 13:57:48,563 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 13:57:49,411 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 13:57:49,668 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 13:57:49,674 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 13:57:50,088 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:57:50,091 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 13:57:50,127 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 22ms. Found 0 JPA repository interfaces.
2020-05-17 13:57:50,144 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:57:50,146 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 13:57:50,162 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 6ms. Found 0 Redis repository interfaces.
2020-05-17 13:57:50,263 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 13:57:50,285 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 13:57:50,461 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 13:57:50,764 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 13:57:50,787 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:57:50,787 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:57:50,787 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:57:50,788 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:57:50,788 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 13:57:50,789 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:57:50,789 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:57:50,789 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:57:50,790 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 13:57:50,790 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:57:50,790 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:57:50,791 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:57:50,814 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 13:57:50,974 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:57:51,407 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:57:51,418 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:57:51,423 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4a453f8d' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:57:51,435 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:57:51,449 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:57:51,532 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 13:57:51,533 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 13:57:52,233 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 13:57:52,355 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 13:57:52,628 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 13:57:52,804 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 13:57:52,810 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 13:57:53,355 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 13:57:53,386 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 13:57:54,822 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 13:57:54,834 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:57:55,702 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 13:57:55,968 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:57:55,969 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:57:55,989 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@65067d90
2020-05-17 13:57:56,154 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 13:57:56,170 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 13:57:56,171 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 13:57:56,172 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 13:57:56,172 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 13:57:56,173 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 13:57:56,173 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 13:57:56,175 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 13:57:56,909 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:57:56,910 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:57:57,389 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 13:57:58,173 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 13:58:00,163 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@77070012, org.springframework.security.web.context.SecurityContextPersistenceFilter@6c3a3d87, org.springframework.security.web.header.HeaderWriterFilter@6c826924, org.springframework.security.web.authentication.logout.LogoutFilter@4f72e38c, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@251e00a0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@f0a6b04, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4518bffd, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@39ad1fdb, org.springframework.security.web.session.SessionManagementFilter@d015dba, org.springframework.security.web.access.ExceptionTranslationFilter@26b3eb48, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@787f97b]
2020-05-17 13:58:00,914 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 13:58:00,960 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 13:58:01,092 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.057 seconds (JVM running for 16.658)
2020-05-17 13:58:05,129 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 13:58:05,149 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:58:05,172 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 13:58:05,232 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 13:59:17,963 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 13:59:17,977 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 13:59:17,981 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 13:59:17,984 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 13:59:17,985 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 13:59:18,000 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 13:59:18,001 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 13:59:18,947 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 13:59:19,231 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 13:59:19,237 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 13:59:19,709 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:59:19,712 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 13:59:19,750 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 26ms. Found 0 JPA repository interfaces.
2020-05-17 13:59:19,771 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:59:19,773 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 13:59:19,791 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 6ms. Found 0 Redis repository interfaces.
2020-05-17 13:59:19,902 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 13:59:19,929 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 13:59:20,101 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 13:59:20,401 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 13:59:20,428 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:59:20,429 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:59:20,429 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:59:20,429 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:59:20,430 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 13:59:20,430 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:59:20,430 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:59:20,430 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:59:20,431 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 13:59:20,431 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:59:20,431 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:59:20,431 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:59:20,455 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 13:59:20,605 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:59:21,029 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:59:21,043 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:59:21,048 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@111fe921' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:59:21,059 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:59:21,074 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:59:21,147 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 13:59:21,148 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 13:59:21,813 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 13:59:21,941 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 13:59:22,242 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 13:59:22,450 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 13:59:22,455 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 13:59:23,016 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 13:59:23,048 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 13:59:24,494 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 13:59:24,505 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:59:25,389 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 13:59:25,630 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:59:25,631 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:59:25,660 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@708f4d81
2020-05-17 13:59:25,840 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 13:59:25,859 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 13:59:25,860 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 13:59:25,861 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 13:59:25,861 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 13:59:25,862 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 13:59:25,863 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 13:59:25,864 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 13:59:26,645 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 13:59:26,646 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 13:59:27,175 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 13:59:27,944 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 13:59:29,863 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@645f3e8b, org.springframework.security.web.context.SecurityContextPersistenceFilter@76fece79, org.springframework.security.web.header.HeaderWriterFilter@68076f57, org.springframework.security.web.authentication.logout.LogoutFilter@75ad8ca8, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@27de073b, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6a5c67cf, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6f78eb17, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5e1db27e, org.springframework.security.web.session.SessionManagementFilter@29514616, org.springframework.security.web.access.ExceptionTranslationFilter@20b1f874, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7aadd290]
2020-05-17 13:59:30,627 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 13:59:30,676 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 13:59:30,799 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.151 seconds (JVM running for 16.773)
2020-05-17 13:59:31,383 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 13:59:31,403 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 13:59:31,424 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 13:59:31,431 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 13:59:52,852 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 13:59:52,865 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 13:59:52,869 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 13:59:52,872 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 13:59:52,872 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 13:59:52,885 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 13:59:52,886 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 13:59:53,735 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 13:59:53,982 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 13:59:53,986 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 13:59:54,440 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:59:54,444 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 13:59:54,484 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 26ms. Found 0 JPA repository interfaces.
2020-05-17 13:59:54,507 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 13:59:54,509 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 13:59:54,524 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 13:59:54,657 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 13:59:54,681 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 13:59:54,851 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 13:59:55,149 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 13:59:55,172 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:59:55,173 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:59:55,173 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:59:55,173 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 13:59:55,174 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 13:59:55,174 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:59:55,174 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:59:55,175 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:59:55,175 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 13:59:55,175 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:59:55,176 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:59:55,176 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 13:59:55,195 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 13:59:55,350 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:59:55,796 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:59:55,807 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:59:55,811 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@26aee0a6' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:59:55,822 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:59:55,833 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 13:59:55,904 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 13:59:55,905 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 13:59:56,627 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 13:59:56,741 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 13:59:56,985 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 13:59:57,178 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 13:59:57,184 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 13:59:57,740 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 13:59:57,771 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 13:59:59,195 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 13:59:59,206 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:00:00,112 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:00:00,354 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:00:00,355 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:00:00,382 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@7c943143
2020-05-17 14:00:00,538 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:00:00,554 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:00:00,555 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:00:00,556 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:00:00,557 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:00:00,557 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:00:00,558 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:00:00,560 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:00:01,278 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:00:01,279 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:00:01,811 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:00:02,562 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:00:04,582 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@4f7db06c, org.springframework.security.web.context.SecurityContextPersistenceFilter@6e6d4a64, org.springframework.security.web.header.HeaderWriterFilter@7bdab06c, org.springframework.security.web.authentication.logout.LogoutFilter@6413fef3, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@570fc662, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6760a91d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@467310c6, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@e156110, org.springframework.security.web.session.SessionManagementFilter@28089256, org.springframework.security.web.access.ExceptionTranslationFilter@201a6b7d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@63fa7643]
2020-05-17 14:00:05,306 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:00:05,350 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:00:05,484 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 14.962 seconds (JVM running for 16.432)
2020-05-17 14:00:06,334 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:00:06,353 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:00:06,372 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:00:06,378 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:01:37,356 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:01:37,372 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:01:37,377 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:01:37,380 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:01:37,381 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:01:37,403 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:01:37,403 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:01:38,375 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:01:38,646 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:01:38,652 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:01:39,152 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:01:39,155 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:01:39,195 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 24ms. Found 0 JPA repository interfaces.
2020-05-17 14:01:39,214 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:01:39,216 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:01:39,233 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 6ms. Found 0 Redis repository interfaces.
2020-05-17 14:01:39,341 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:01:39,365 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:01:39,554 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:01:39,833 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:01:39,851 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:01:39,852 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:01:39,852 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:01:39,852 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:01:39,853 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:01:39,853 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:01:39,853 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:01:39,853 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:01:39,854 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:01:39,854 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:01:39,854 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:01:39,854 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:01:39,874 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:01:40,026 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:01:40,456 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:01:40,465 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:01:40,469 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@43445fc6' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:01:40,478 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:01:40,489 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:01:40,559 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:01:40,560 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:01:41,269 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:01:41,432 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:01:41,727 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:01:41,957 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:01:41,964 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:01:42,504 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:01:42,538 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:01:43,898 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:01:43,911 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:01:44,802 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:01:45,053 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:01:45,054 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:01:45,081 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@6c152246
2020-05-17 14:01:45,255 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:01:45,277 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:01:45,278 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:01:45,279 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:01:45,280 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:01:45,280 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:01:45,281 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:01:45,283 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:01:46,036 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:01:46,036 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:01:46,528 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:01:47,337 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:01:49,248 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1fae279e, org.springframework.security.web.context.SecurityContextPersistenceFilter@a69c4c3, org.springframework.security.web.header.HeaderWriterFilter@11caa21d, org.springframework.security.web.authentication.logout.LogoutFilter@7931cea2, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@679864e0, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@45db8ba6, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@77f21c0a, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@411db18d, org.springframework.security.web.session.SessionManagementFilter@493557d7, org.springframework.security.web.access.ExceptionTranslationFilter@67710b92, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@201ac0ef]
2020-05-17 14:01:49,997 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:01:50,050 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:01:50,169 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.261 seconds (JVM running for 17.016)
2020-05-17 14:01:51,263 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:01:51,282 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:01:51,301 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:01:51,350 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:04:24,664 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:04:24,677 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:04:24,681 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:04:24,683 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:04:24,684 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:04:24,698 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:04:24,699 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:04:25,521 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:04:25,767 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:04:25,773 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:04:26,214 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:04:26,216 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:04:26,255 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 27ms. Found 0 JPA repository interfaces.
2020-05-17 14:04:26,273 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:04:26,275 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:04:26,290 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 14:04:26,443 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:04:26,471 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:04:26,649 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:04:26,956 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:04:26,978 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:04:26,978 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:04:26,979 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:04:26,979 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:04:26,980 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:04:26,980 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:04:26,980 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:04:26,980 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:04:26,981 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:04:26,981 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:04:26,981 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:04:26,982 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:04:27,006 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:04:27,169 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:04:27,611 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:04:27,626 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:04:27,630 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@113d0f75' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:04:27,641 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:04:27,655 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:04:27,729 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:04:27,730 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:04:28,418 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:04:28,539 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:04:28,798 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:04:28,995 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:04:29,002 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:04:29,600 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:04:29,632 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:04:30,983 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:04:30,994 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:04:31,898 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:04:32,146 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:04:32,147 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:04:32,172 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@61fe5253
2020-05-17 14:04:32,325 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:04:32,340 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:04:32,341 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:04:32,341 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:04:32,342 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:04:32,343 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:04:32,343 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:04:32,345 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:04:33,078 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:04:33,079 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:04:33,595 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:04:34,291 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:04:36,181 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1197cd8, org.springframework.security.web.context.SecurityContextPersistenceFilter@3a273e53, org.springframework.security.web.header.HeaderWriterFilter@7a56c3c7, org.springframework.security.web.authentication.logout.LogoutFilter@1ff02deb, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@367026f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@36fb5ba, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@302b6367, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5d18255a, org.springframework.security.web.session.SessionManagementFilter@29701f1f, org.springframework.security.web.access.ExceptionTranslationFilter@1e620fe7, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@68812b74]
2020-05-17 14:04:36,875 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:04:36,924 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:04:37,046 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 14.702 seconds (JVM running for 16.242)
2020-05-17 14:04:38,070 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:04:38,089 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:04:38,106 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:04:38,112 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:05:15,208 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:05:15,222 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:05:15,226 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:05:15,228 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:05:15,229 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:05:15,247 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:05:15,247 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:05:16,166 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:05:16,433 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:05:16,438 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:05:17,221 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:05:17,226 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:05:17,271 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 28ms. Found 0 JPA repository interfaces.
2020-05-17 14:05:17,287 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:05:17,289 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:05:17,306 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 14:05:17,454 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:05:17,487 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:05:17,704 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:05:18,035 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:05:18,062 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:05:18,062 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:05:18,062 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:05:18,062 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:05:18,063 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:05:18,063 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:05:18,063 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:05:18,063 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:05:18,064 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:05:18,064 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:05:18,064 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:05:18,064 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:05:18,087 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:05:18,245 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:05:18,690 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:05:18,699 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:05:18,703 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4a453f8d' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:05:18,714 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:05:18,727 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:05:18,797 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:05:18,798 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:05:19,531 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:05:19,656 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:05:19,984 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:05:20,206 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:05:20,210 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:05:20,750 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:05:20,784 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:05:22,207 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:05:22,218 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:05:23,043 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:05:23,340 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:05:23,341 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:05:23,363 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@10ef09e3
2020-05-17 14:05:23,525 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:05:23,541 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:05:23,542 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:05:23,543 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:05:23,543 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:05:23,544 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:05:23,545 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:05:23,548 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:05:24,276 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:05:24,276 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:05:24,768 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:05:25,583 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:05:27,471 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3ace955c, org.springframework.security.web.context.SecurityContextPersistenceFilter@32daccab, org.springframework.security.web.header.HeaderWriterFilter@45db8ba6, org.springframework.security.web.authentication.logout.LogoutFilter@5cbdc23b, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@6ccb3dd, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@4f34f451, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5a1f4fa4, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@4c00c8ce, org.springframework.security.web.session.SessionManagementFilter@398f6f04, org.springframework.security.web.access.ExceptionTranslationFilter@a69c4c3, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@34672fb]
2020-05-17 14:05:28,187 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:05:28,229 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:05:28,350 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.554 seconds (JVM running for 17.229)
2020-05-17 14:05:29,231 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:05:29,252 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:05:29,273 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:05:29,279 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:06:11,771 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:06:11,785 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:06:11,789 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:06:11,791 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:06:11,792 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:06:11,807 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:06:11,808 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:06:12,644 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:06:12,909 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:06:12,916 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:06:13,362 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:06:13,365 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:06:13,406 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 25ms. Found 0 JPA repository interfaces.
2020-05-17 14:06:13,425 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:06:13,426 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:06:13,446 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 7ms. Found 0 Redis repository interfaces.
2020-05-17 14:06:13,559 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:06:13,583 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:06:13,769 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:06:14,068 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:06:14,098 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:06:14,099 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:06:14,099 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:06:14,099 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:06:14,100 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:06:14,100 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:06:14,100 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:06:14,100 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:06:14,100 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:06:14,101 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:06:14,101 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:06:14,101 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:06:14,125 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:06:14,294 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:06:14,703 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:06:14,712 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:06:14,716 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4a453f8d' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:06:14,727 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:06:14,739 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:06:14,812 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:06:14,813 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:06:15,531 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:06:15,661 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:06:15,906 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:06:16,123 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:06:16,128 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:06:17,477 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:06:17,510 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:06:18,911 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:06:18,922 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:06:19,768 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:06:19,986 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:06:19,987 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:06:20,013 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@407956a5
2020-05-17 14:06:20,177 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:06:20,193 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:06:20,194 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:06:20,194 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:06:20,195 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:06:20,195 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:06:20,196 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:06:20,198 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:06:20,913 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:06:20,914 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:06:21,401 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:06:22,171 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:06:24,203 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@5ec2462, org.springframework.security.web.context.SecurityContextPersistenceFilter@992f314, org.springframework.security.web.header.HeaderWriterFilter@7d59e235, org.springframework.security.web.authentication.logout.LogoutFilter@677480c8, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@3057a923, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2a38b5c7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@493557d7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@5d81bc79, org.springframework.security.web.session.SessionManagementFilter@3bb29351, org.springframework.security.web.access.ExceptionTranslationFilter@12139db0, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@55f2e76a]
2020-05-17 14:06:24,933 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:06:24,982 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:06:25,103 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.755 seconds (JVM running for 17.274)
2020-05-17 14:06:57,669 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:06:57,693 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:06:57,712 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:06:57,719 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:10:29,207 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:10:29,223 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:10:29,228 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:10:29,230 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:10:29,231 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:10:29,248 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:10:29,248 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:10:30,310 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:10:30,579 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:10:30,584 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:10:31,059 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:10:31,063 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:10:31,095 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 20ms. Found 0 JPA repository interfaces.
2020-05-17 14:10:31,111 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:10:31,113 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:10:31,128 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 14:10:31,259 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:10:31,290 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:10:31,463 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:10:31,766 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:10:31,792 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:10:31,792 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:10:31,793 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:10:31,793 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:10:31,794 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:10:31,794 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:10:31,795 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:10:31,795 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:10:31,795 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:10:31,796 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:10:31,796 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:10:31,797 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:10:31,828 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:10:32,041 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:10:32,509 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:10:32,525 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:10:32,530 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@3a80c534' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:10:32,546 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:10:32,564 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:10:32,650 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:10:32,651 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:10:33,475 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:10:33,629 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:10:33,889 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:10:34,094 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:10:34,100 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:10:35,658 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:10:35,690 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:10:37,177 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:10:37,189 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:10:38,143 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:10:38,450 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:10:38,451 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:10:38,475 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@3e1f6318
2020-05-17 14:10:38,659 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:10:38,680 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:10:38,681 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:10:38,682 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:10:38,683 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:10:38,683 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:10:38,684 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:10:38,686 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:10:39,538 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:10:39,539 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:10:40,039 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:10:40,843 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:10:42,996 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@48f38142, org.springframework.security.web.context.SecurityContextPersistenceFilter@1179c778, org.springframework.security.web.header.HeaderWriterFilter@38ce90b4, org.springframework.security.web.authentication.logout.LogoutFilter@263fc5f3, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@605ef319, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@7aafaf44, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@20c642ef, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@16e693c1, org.springframework.security.web.session.SessionManagementFilter@78e5b18, org.springframework.security.web.access.ExceptionTranslationFilter@53ed864c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@71878833]
2020-05-17 14:10:43,702 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:10:43,750 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:10:43,877 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 17.365 seconds (JVM running for 20.113)
2020-05-17 14:10:44,508 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:10:44,528 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:10:44,548 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:10:44,554 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:11:23,291 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:11:23,305 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:11:23,309 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:11:23,312 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:11:23,313 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:11:23,327 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:11:23,328 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:11:24,295 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:11:24,579 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:11:24,587 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:11:25,005 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:11:25,008 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:11:25,051 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 29ms. Found 0 JPA repository interfaces.
2020-05-17 14:11:25,071 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:11:25,072 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:11:25,094 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 9ms. Found 0 Redis repository interfaces.
2020-05-17 14:11:25,243 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:11:25,274 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:11:25,489 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:11:26,109 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:11:26,136 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:11:26,136 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:11:26,137 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:11:26,140 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:11:26,141 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:11:26,142 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:11:26,142 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:11:26,142 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:11:26,143 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:11:26,143 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:11:26,143 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:11:26,144 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:11:26,180 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:11:26,427 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:11:26,964 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:11:26,976 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:11:26,983 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4ffe3d42' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:11:26,997 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:11:27,012 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:11:27,095 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:11:27,096 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:11:27,850 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:11:27,990 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:11:28,272 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:11:28,454 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:11:28,461 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:11:29,019 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:11:29,054 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:11:30,416 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:11:30,427 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:11:31,274 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:11:31,504 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:11:31,505 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:11:31,531 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@bf2f2ce
2020-05-17 14:11:31,685 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:11:31,702 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:11:31,703 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:11:31,704 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:11:31,704 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:11:31,705 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:11:31,705 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:11:31,707 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:11:32,495 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:11:32,496 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:11:32,985 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:11:33,748 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:11:35,775 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1582dfec, org.springframework.security.web.context.SecurityContextPersistenceFilter@337fd6a1, org.springframework.security.web.header.HeaderWriterFilter@68754439, org.springframework.security.web.authentication.logout.LogoutFilter@5c1ecf52, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@1e512b3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@20c9b155, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2c1523cd, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1bae8e5e, org.springframework.security.web.session.SessionManagementFilter@15ddf775, org.springframework.security.web.access.ExceptionTranslationFilter@3464d24c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@7931cea2]
2020-05-17 14:11:36,509 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:11:36,561 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:11:36,702 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.807 seconds (JVM running for 17.605)
2020-05-17 14:11:57,446 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:11:57,465 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:11:57,484 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:11:57,709 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:12:24,446 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:12:24,463 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:12:24,468 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:12:24,470 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:12:24,471 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:12:24,490 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:12:24,491 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:12:25,390 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:12:25,702 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:12:25,708 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:12:26,213 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:12:26,217 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:12:26,247 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 20ms. Found 0 JPA repository interfaces.
2020-05-17 14:12:26,263 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:12:26,265 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:12:26,282 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 14:12:26,410 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:12:26,437 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:12:26,612 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:12:26,948 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:12:26,978 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:12:26,979 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:12:26,979 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:12:26,979 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:12:26,980 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:12:26,980 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:12:26,981 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:12:26,981 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:12:26,981 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:12:26,981 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:12:26,981 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:12:26,982 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:12:27,010 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:12:27,161 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:12:27,604 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:12:27,614 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:12:27,620 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@69499c6f' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:12:27,631 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:12:27,643 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:12:27,713 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:12:27,713 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:12:28,445 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:12:28,569 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:12:28,829 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:12:29,056 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:12:29,060 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:12:29,551 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:12:29,583 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:12:30,847 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:12:30,858 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:12:31,766 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:12:32,030 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:12:32,031 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:12:32,060 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@5e79bdf6
2020-05-17 14:12:32,224 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:12:32,243 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:12:32,244 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:12:32,245 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:12:32,245 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:12:32,246 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:12:32,247 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:12:32,250 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:12:33,023 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:12:33,023 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:12:33,518 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:12:34,507 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:12:36,734 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@1dde749e, org.springframework.security.web.context.SecurityContextPersistenceFilter@6fab250b, org.springframework.security.web.header.HeaderWriterFilter@75351aec, org.springframework.security.web.authentication.logout.LogoutFilter@4913465d, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@25a218a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3da068e8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@1ff9d66b, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@282fabe9, org.springframework.security.web.session.SessionManagementFilter@1c83652d, org.springframework.security.web.access.ExceptionTranslationFilter@339de67e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@a809a62]
2020-05-17 14:12:37,521 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:12:37,590 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:12:37,732 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.613 seconds (JVM running for 17.224)
2020-05-17 14:12:41,100 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:12:41,122 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:12:41,144 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:12:41,152 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:13:30,808 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:13:30,822 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:13:30,826 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:13:30,828 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:13:30,829 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:13:30,845 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:13:30,846 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:13:31,742 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:13:32,039 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:13:32,045 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:13:32,525 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:13:32,529 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:13:32,575 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 32ms. Found 0 JPA repository interfaces.
2020-05-17 14:13:32,595 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:13:32,596 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:13:32,616 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 7ms. Found 0 Redis repository interfaces.
2020-05-17 14:13:32,755 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:13:32,777 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:13:32,961 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:13:33,320 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:13:33,349 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:13:33,349 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:13:33,350 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:13:33,350 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:13:33,351 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:13:33,351 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:13:33,351 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:13:33,352 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:13:33,352 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:13:33,352 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:13:33,352 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:13:33,353 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:13:33,383 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:13:33,555 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:13:34,072 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:13:34,085 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:13:34,089 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@1be3f8f8' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:13:34,101 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:13:34,114 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:13:34,192 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:13:34,193 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:13:34,938 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:13:35,073 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:13:35,375 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:13:35,624 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:13:35,630 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:13:36,231 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:13:36,263 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:13:37,696 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:13:37,707 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:13:38,587 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:13:38,837 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:13:38,838 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:13:38,856 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@65067d90
2020-05-17 14:13:39,000 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:13:39,018 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:13:39,019 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:13:39,020 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:13:39,021 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:13:39,021 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:13:39,022 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:13:39,024 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:13:39,773 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:13:39,773 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:13:40,238 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:13:41,001 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:13:42,985 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@7d24bd80, org.springframework.security.web.context.SecurityContextPersistenceFilter@45db8ba6, org.springframework.security.web.header.HeaderWriterFilter@74cf0dd9, org.springframework.security.web.authentication.logout.LogoutFilter@45e97963, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@5decbb5f, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2809e7ab, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4ca62855, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6a28f67a, org.springframework.security.web.session.SessionManagementFilter@a69c4c3, org.springframework.security.web.access.ExceptionTranslationFilter@11caa21d, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@12a9889e]
2020-05-17 14:13:43,757 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:13:43,809 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:13:43,964 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.504 seconds (JVM running for 17.35)
2020-05-17 14:13:45,193 [main] INFO  [o.h.event.internal.DefaultDeleteEventListener] DefaultDeleteEventListener.java:220 - HHH000114: Handling transient entity in delete processing
2020-05-17 14:13:45,813 [main] WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] SqlExceptionHelper.java:137 - SQL Error: 1146, SQLState: 42S02
2020-05-17 14:13:45,814 [main] ERROR [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] SqlExceptionHelper.java:142 - Table 'rbac_cloud_service_monitor.ServiceFlowRule' doesn't exist
2020-05-17 14:13:46,132 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:13:46,151 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:13:46,213 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:13:46,219 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:22:06,490 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:22:06,512 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:22:06,517 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:22:06,520 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:22:06,522 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:22:06,546 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:22:06,546 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:22:07,523 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:22:07,760 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:22:07,766 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:22:08,255 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:22:08,263 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:22:08,301 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 26ms. Found 0 JPA repository interfaces.
2020-05-17 14:22:08,318 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:22:08,320 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:22:08,341 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 7ms. Found 0 Redis repository interfaces.
2020-05-17 14:22:08,456 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:22:08,489 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:22:08,647 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:22:08,954 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:22:08,974 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:22:08,975 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:22:08,975 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:22:08,975 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:22:08,976 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:22:08,976 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:22:08,977 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:22:08,977 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:22:08,977 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:22:08,978 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:22:08,978 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:22:08,978 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:22:08,999 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:22:09,158 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:22:09,562 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:22:09,576 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:22:09,582 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@7b79ff1c' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:22:09,593 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:22:09,608 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:22:09,680 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:22:09,681 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:22:10,338 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:22:10,466 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:22:10,729 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:22:11,012 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:22:11,017 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:22:11,573 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:22:11,605 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:22:13,009 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:22:13,020 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:22:13,898 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:22:14,136 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:22:14,136 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:22:14,164 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@4fd2b418
2020-05-17 14:22:14,311 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:22:14,329 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:22:14,330 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:22:14,331 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:22:14,331 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:22:14,331 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:22:14,332 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:22:14,333 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:22:15,063 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:22:15,063 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:22:15,571 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:22:16,337 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:22:18,480 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@a6a7c4f, org.springframework.security.web.context.SecurityContextPersistenceFilter@57fd93f9, org.springframework.security.web.header.HeaderWriterFilter@2088e339, org.springframework.security.web.authentication.logout.LogoutFilter@1edad178, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@5afaa87a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@1a7f6678, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@4aebd384, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@451d6bc9, org.springframework.security.web.session.SessionManagementFilter@52f2d8e8, org.springframework.security.web.access.ExceptionTranslationFilter@21e441d1, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3e2afba0]
2020-05-17 14:22:19,282 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:22:19,329 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:22:19,465 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.241 seconds (JVM running for 16.834)
2020-05-17 14:22:19,997 [main] INFO  [o.h.event.internal.DefaultDeleteEventListener] DefaultDeleteEventListener.java:220 - HHH000114: Handling transient entity in delete processing
2020-05-17 14:22:20,168 [main] WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] SqlExceptionHelper.java:137 - SQL Error: 1146, SQLState: 42S02
2020-05-17 14:22:20,168 [main] ERROR [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] SqlExceptionHelper.java:142 - Table 'rbac_cloud_service_monitor.serviceflowrule' doesn't exist
2020-05-17 14:22:20,278 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:22:20,305 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:22:20,332 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:22:20,342 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:23:00,443 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:23:00,457 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:23:00,461 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:23:00,464 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:23:00,465 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:23:00,481 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:23:00,482 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:23:01,360 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:23:01,628 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:23:01,634 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:23:02,069 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:23:02,071 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:23:02,106 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 24ms. Found 0 JPA repository interfaces.
2020-05-17 14:23:02,123 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:23:02,125 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:23:02,140 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 14:23:02,242 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:23:02,265 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:23:02,455 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:23:02,793 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:23:02,822 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:23:02,823 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:23:02,824 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:23:02,824 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:23:02,825 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:23:02,825 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:23:02,826 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:23:02,826 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:23:02,826 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:23:02,827 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:23:02,827 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:23:02,827 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:23:02,852 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:23:03,015 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:23:03,469 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:23:03,478 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:23:03,483 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@402f61f5' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:23:03,493 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:23:03,505 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:23:03,581 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:23:03,582 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:23:04,407 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:23:04,570 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:23:04,846 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:23:05,186 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:23:05,194 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:23:05,761 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:23:05,803 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:23:07,251 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:23:07,262 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:23:08,154 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:23:08,409 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:23:08,410 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:23:08,434 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@6f54d397
2020-05-17 14:23:08,604 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:23:08,623 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:23:08,624 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:23:08,625 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:23:08,626 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:23:08,627 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:23:08,628 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:23:08,630 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:23:09,496 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:23:09,497 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:23:10,052 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:23:10,910 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:23:13,064 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@bba6542, org.springframework.security.web.context.SecurityContextPersistenceFilter@8cc7489, org.springframework.security.web.header.HeaderWriterFilter@58c84be1, org.springframework.security.web.authentication.logout.LogoutFilter@138a8c9e, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@d015dba, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@301da01d, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@5cc12274, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@14ab3e22, org.springframework.security.web.session.SessionManagementFilter@608707d, org.springframework.security.web.access.ExceptionTranslationFilter@20c9b155, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4299b47d]
2020-05-17 14:23:13,943 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:23:14,000 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:23:14,153 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 16.19 seconds (JVM running for 18.002)
2020-05-17 14:23:15,262 [main] INFO  [o.h.event.internal.DefaultDeleteEventListener] DefaultDeleteEventListener.java:220 - HHH000114: Handling transient entity in delete processing
2020-05-17 14:27:12,836 [HikariPool-1 housekeeper] WARN  [com.zaxxer.hikari.pool.HikariPool] HikariPool.java:787 - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=4m6s971ms31µs284ns).
2020-05-17 14:27:12,888 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:27:12,909 [main] WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] SqlExceptionHelper.java:137 - SQL Error: 1146, SQLState: 42S02
2020-05-17 14:27:12,910 [main] ERROR [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] SqlExceptionHelper.java:142 - Table 'rbac_cloud_service_monitor.serviceflowrule' doesn't exist
2020-05-17 14:27:12,914 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:27:12,933 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:27:12,940 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:27:20,823 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:27:20,845 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:27:20,853 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:27:20,858 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:27:20,860 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:27:20,954 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:27:20,955 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:27:22,270 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:27:22,536 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:27:22,543 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:27:23,007 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:27:23,009 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:27:23,047 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 26ms. Found 0 JPA repository interfaces.
2020-05-17 14:27:23,068 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:27:23,070 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:27:23,086 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 14:27:23,208 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:27:23,230 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:27:23,409 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:27:23,704 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:27:23,720 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:27:23,721 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:27:23,721 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:27:23,721 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:27:23,722 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:27:23,722 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:27:23,722 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:27:23,722 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:27:23,723 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:27:23,723 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:27:23,723 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:27:23,724 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:27:23,751 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:27:23,911 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:27:24,310 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:27:24,323 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:27:24,329 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@4fd37449' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:27:24,348 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:27:24,364 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:27:24,443 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:27:24,444 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:27:25,163 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:27:25,283 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:27:25,526 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:27:25,722 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:27:25,728 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:27:26,300 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:27:26,332 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:27:27,781 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:27:27,792 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:27:28,622 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:27:28,855 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:27:28,855 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:27:28,879 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@7c5eb88c
2020-05-17 14:27:29,048 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:27:29,066 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:27:29,067 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:27:29,068 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:27:29,069 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:27:29,069 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:27:29,070 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:27:29,072 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:27:29,775 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:27:29,776 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:27:30,334 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:27:31,803 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:27:36,583 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@2927d781, org.springframework.security.web.context.SecurityContextPersistenceFilter@1e512b3, org.springframework.security.web.header.HeaderWriterFilter@56e32a23, org.springframework.security.web.authentication.logout.LogoutFilter@490f4b14, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@23216e17, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@26b3eb48, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@8c68f7f, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@1fae279e, org.springframework.security.web.session.SessionManagementFilter@3db2388e, org.springframework.security.web.access.ExceptionTranslationFilter@3467d540, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@4431233f]
2020-05-17 14:27:39,464 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:27:39,533 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:27:39,902 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 21.932 seconds (JVM running for 23.791)
2020-05-17 14:27:41,606 [main] INFO  [o.h.event.internal.DefaultDeleteEventListener] DefaultDeleteEventListener.java:220 - HHH000114: Handling transient entity in delete processing
2020-05-17 14:28:48,980 [HikariPool-1 housekeeper] WARN  [com.zaxxer.hikari.pool.HikariPool] HikariPool.java:787 - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m22s578ms71µs680ns).
2020-05-17 14:28:49,044 [main] WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] SqlExceptionHelper.java:137 - SQL Error: 1146, SQLState: 42S02
2020-05-17 14:28:49,044 [main] ERROR [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] SqlExceptionHelper.java:142 - Table 'rbac_cloud_service_monitor.serviceflowrLe' doesn't exist
2020-05-17 14:28:49,139 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:28:49,159 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:28:49,179 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:28:49,185 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:30:05,120 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:30:05,134 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:30:05,138 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:30:05,141 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:30:05,142 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:30:05,156 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:30:05,157 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:30:06,023 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:30:06,269 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:30:06,274 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:30:06,711 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:30:06,713 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:30:06,747 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 22ms. Found 0 JPA repository interfaces.
2020-05-17 14:30:06,768 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:30:06,770 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:30:06,786 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 14:30:06,907 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:30:06,930 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:30:07,118 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:30:07,433 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:30:07,450 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:30:07,451 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:30:07,451 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:30:07,452 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:30:07,452 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:30:07,452 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:30:07,453 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:30:07,453 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:30:07,453 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:30:07,453 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:30:07,454 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:30:07,454 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:30:07,475 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:30:07,629 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:30:08,052 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:30:08,065 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:30:08,072 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@17136390' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:30:08,084 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:30:08,101 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:30:08,181 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:30:08,182 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:30:08,866 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:30:09,005 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:30:09,285 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:30:09,478 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:30:09,484 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:30:10,009 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:30:10,041 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:30:11,422 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:30:11,433 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:30:12,253 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:30:12,483 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:30:12,483 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:30:12,508 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@65402e26
2020-05-17 14:30:12,667 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:30:12,684 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:30:12,685 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:30:12,686 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:30:12,687 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:30:12,688 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:30:12,689 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:30:12,691 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:30:13,399 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:30:13,399 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:30:13,890 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:30:14,694 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:30:16,592 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@26a9754a, org.springframework.security.web.context.SecurityContextPersistenceFilter@72bd8702, org.springframework.security.web.header.HeaderWriterFilter@890196b, org.springframework.security.web.authentication.logout.LogoutFilter@3593e8dd, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@11e2de88, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@18f90bd8, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2088e339, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@738ce295, org.springframework.security.web.session.SessionManagementFilter@3da068e8, org.springframework.security.web.access.ExceptionTranslationFilter@24a29d8, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@6e975866]
2020-05-17 14:30:17,295 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:30:17,352 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:30:17,478 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 14.969 seconds (JVM running for 17.056)
2020-05-17 14:30:18,011 [main] INFO  [o.h.event.internal.DefaultDeleteEventListener] DefaultDeleteEventListener.java:220 - HHH000114: Handling transient entity in delete processing
2020-05-17 14:30:22,079 [main] WARN  [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] SqlExceptionHelper.java:137 - SQL Error: 1064, SQLState: 42000
2020-05-17 14:30:22,079 [main] ERROR [org.hibernate.engine.jdbc.spi.SqlExceptionHelper] SqlExceptionHelper.java:142 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ''ServiceFlowRule'' at line 1
2020-05-17 14:30:22,219 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:30:22,239 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:30:22,259 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:30:22,267 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:33:38,287 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:33:38,301 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:33:38,305 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:33:38,308 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:33:38,309 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:33:38,324 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:33:38,325 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:33:39,172 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:33:39,440 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:33:39,445 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:33:39,948 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:33:39,951 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:33:39,984 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 21ms. Found 0 JPA repository interfaces.
2020-05-17 14:33:40,000 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:33:40,002 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:33:40,021 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 7ms. Found 0 Redis repository interfaces.
2020-05-17 14:33:40,150 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:33:40,175 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:33:40,386 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:33:40,684 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:33:40,702 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:33:40,702 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:33:40,702 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:33:40,702 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:33:40,703 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:33:40,703 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:33:40,703 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:33:40,703 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:33:40,704 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:33:40,704 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:33:40,704 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:33:40,704 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:33:40,730 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:33:40,899 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:33:41,324 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:33:41,333 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:33:41,337 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@2be50bba' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:33:41,347 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:33:41,359 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:33:41,430 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:33:41,430 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:33:42,122 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:33:42,265 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:33:42,556 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:33:42,743 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:33:42,748 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:33:43,348 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:33:43,380 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:33:44,699 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:33:44,710 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:33:45,641 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:33:45,883 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:33:45,883 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:33:45,906 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@6e925a46
2020-05-17 14:33:46,067 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:33:46,084 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:33:46,085 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:33:46,086 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:33:46,087 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:33:46,088 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:33:46,089 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:33:46,092 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:33:46,886 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:33:46,887 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:33:47,401 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:33:48,179 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:33:50,104 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@679864e0, org.springframework.security.web.context.SecurityContextPersistenceFilter@62f30cea, org.springframework.security.web.header.HeaderWriterFilter@3746749, org.springframework.security.web.authentication.logout.LogoutFilter@35283b74, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@49e8f283, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@3a792bf9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@6a2cd5ea, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@629e9957, org.springframework.security.web.session.SessionManagementFilter@78f3ce56, org.springframework.security.web.access.ExceptionTranslationFilter@5da5bd9e, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@45bf1ee3]
2020-05-17 14:33:50,802 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:33:50,851 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:33:50,982 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.312 seconds (JVM running for 17.013)
2020-05-17 14:33:51,878 [main] INFO  [o.h.event.internal.DefaultDeleteEventListener] DefaultDeleteEventListener.java:220 - HHH000114: Handling transient entity in delete processing
2020-05-17 14:33:56,779 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:33:56,803 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:33:56,823 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:33:56,829 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:34:13,919 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:34:13,933 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:34:13,937 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:34:13,939 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:34:13,940 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:34:13,955 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:34:13,955 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:34:14,876 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:34:15,132 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:34:15,137 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:34:15,615 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:34:15,617 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:34:15,654 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 25ms. Found 0 JPA repository interfaces.
2020-05-17 14:34:15,675 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:34:15,677 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:34:15,693 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 14:34:15,830 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:34:15,858 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:34:16,048 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:34:16,344 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:34:16,372 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:34:16,372 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:34:16,373 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:34:16,373 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:34:16,374 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:34:16,374 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:34:16,374 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:34:16,374 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:34:16,375 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:34:16,375 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:34:16,375 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:34:16,375 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:34:16,399 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:34:16,561 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:34:17,001 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:34:17,026 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:34:17,032 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@56f2c9e8' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:34:17,045 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:34:17,058 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:34:17,138 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:34:17,139 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:34:17,831 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:34:17,976 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:34:18,274 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:34:18,468 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:34:18,473 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:34:21,452 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:34:21,485 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:34:22,791 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:34:22,802 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:34:23,614 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:34:23,853 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:34:23,854 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:34:23,873 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@62291850
2020-05-17 14:34:24,022 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:34:24,038 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:34:24,039 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:34:24,040 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:34:24,040 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:34:24,040 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:34:24,041 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:34:24,042 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:34:24,773 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:34:24,774 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:34:25,283 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:34:26,047 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:34:28,002 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@13bf9a03, org.springframework.security.web.context.SecurityContextPersistenceFilter@2857dbe3, org.springframework.security.web.header.HeaderWriterFilter@240e8240, org.springframework.security.web.authentication.logout.LogoutFilter@1b3ee7f3, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@55a72c9e, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@292109c7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@747d1e03, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2c952e6, org.springframework.security.web.session.SessionManagementFilter@27de073b, org.springframework.security.web.access.ExceptionTranslationFilter@7de922ba, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@3096a890]
2020-05-17 14:34:28,751 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:34:28,799 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:34:28,934 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 17.299 seconds (JVM running for 18.976)
2020-05-17 14:34:29,456 [main] INFO  [o.h.event.internal.DefaultDeleteEventListener] DefaultDeleteEventListener.java:220 - HHH000114: Handling transient entity in delete processing
2020-05-17 14:34:32,274 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:34:32,296 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:34:32,315 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:34:32,322 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:35:02,992 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:35:03,005 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:35:03,009 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:35:03,012 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:35:03,013 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:35:03,029 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:35:03,030 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:35:03,907 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:35:04,173 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:35:04,179 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:35:04,609 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:35:04,612 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:35:04,647 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 22ms. Found 0 JPA repository interfaces.
2020-05-17 14:35:04,665 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:35:04,666 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:35:04,684 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 14:35:04,801 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:35:04,829 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:35:05,003 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:35:05,308 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:35:05,329 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:35:05,330 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:35:05,330 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:35:05,331 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:35:05,331 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:35:05,332 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:35:05,332 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:35:05,332 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:35:05,332 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:35:05,333 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:35:05,333 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:35:05,333 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:35:05,354 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:35:05,500 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:35:05,905 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:35:05,915 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:35:05,920 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@40ac0a56' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:35:05,936 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:35:05,948 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:35:06,017 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:35:06,017 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:35:06,745 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:35:06,881 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:35:07,150 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:35:07,350 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:35:07,357 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:35:07,956 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:35:07,988 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:35:09,478 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:35:09,490 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:35:10,457 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:35:10,709 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:35:10,709 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:35:10,739 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@5b0fc8c2
2020-05-17 14:35:10,903 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:35:10,926 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:35:10,927 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:35:10,928 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:35:10,929 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:35:10,930 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:35:10,930 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:35:10,933 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:35:11,712 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:35:11,713 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:35:12,338 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:35:13,150 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:35:15,090 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@3f30c9cf, org.springframework.security.web.context.SecurityContextPersistenceFilter@4c3663fc, org.springframework.security.web.header.HeaderWriterFilter@2fc94125, org.springframework.security.web.authentication.logout.LogoutFilter@1f799f4c, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@72bb0640, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@6ab36cee, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@53ed864c, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@496203da, org.springframework.security.web.session.SessionManagementFilter@a308ffd, org.springframework.security.web.access.ExceptionTranslationFilter@120f441c, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@b225c59]
2020-05-17 14:35:15,750 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:35:15,796 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:35:15,946 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.345 seconds (JVM running for 16.988)
2020-05-17 14:35:19,256 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:35:19,275 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:35:19,295 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:35:19,303 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:38:14,196 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:38:14,212 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:38:14,218 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:38:14,221 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:38:14,222 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:38:14,240 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:38:14,241 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:38:15,137 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:38:15,420 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:38:15,426 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:38:15,925 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:38:15,929 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:38:15,967 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 28ms. Found 0 JPA repository interfaces.
2020-05-17 14:38:15,989 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:38:15,991 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:38:16,004 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 14:38:16,134 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:38:16,163 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:38:16,364 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:38:16,681 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:38:16,700 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:38:16,700 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:38:16,701 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:38:16,701 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:38:16,702 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:38:16,702 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:38:16,702 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:38:16,702 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:38:16,702 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:38:16,702 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:38:16,703 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:38:16,703 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:38:16,723 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:38:16,865 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:38:17,309 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:38:17,321 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:38:17,326 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@2be50bba' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:38:17,336 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:38:17,351 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:38:17,418 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:38:17,419 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:38:18,159 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:38:18,299 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:38:18,579 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:38:18,836 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:38:18,841 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:38:19,454 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:38:19,486 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:38:20,866 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:38:20,877 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:38:21,784 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:38:22,056 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:38:22,057 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:38:22,083 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@6f54d397
2020-05-17 14:38:22,245 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:38:22,268 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:38:22,269 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:38:22,270 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:38:22,270 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:38:22,271 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:38:22,272 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:38:22,274 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:38:23,026 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:38:23,027 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:38:23,551 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:38:24,383 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:38:26,368 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@55f2e76a, org.springframework.security.web.context.SecurityContextPersistenceFilter@11caa21d, org.springframework.security.web.header.HeaderWriterFilter@3128be29, org.springframework.security.web.authentication.logout.LogoutFilter@d015dba, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@5cb9ef8a, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@74cf0dd9, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@2a38b5c7, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@6b8f0b64, org.springframework.security.web.session.SessionManagementFilter@67710b92, org.springframework.security.web.access.ExceptionTranslationFilter@6a2cd5ea, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@30ee1a38]
2020-05-17 14:38:27,108 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:38:27,151 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:38:27,279 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.521 seconds (JVM running for 18.02)
2020-05-17 14:38:27,591 [main] ERROR [org.hibernate.hql.internal.ast.ErrorTracker] ErrorTracker.java:62 - line 1:8: unexpected token: *
2020-05-17 14:38:27,592 [main] ERROR [org.hibernate.hql.internal.ast.ErrorTracker] ErrorTracker.java:57 - line 1:8: unexpected token: *
antlr.NoViableAltException: unexpected token: *
	at org.hibernate.hql.internal.antlr.HqlBaseParser.selectClause(HqlBaseParser.java:1263)
	at org.hibernate.hql.internal.antlr.HqlBaseParser.selectFrom(HqlBaseParser.java:1040)
	at org.hibernate.hql.internal.antlr.HqlBaseParser.queryRule(HqlBaseParser.java:748)
	at org.hibernate.hql.internal.antlr.HqlBaseParser.selectStatement(HqlBaseParser.java:319)
	at org.hibernate.hql.internal.antlr.HqlBaseParser.statement(HqlBaseParser.java:198)
	at org.hibernate.hql.internal.ast.QueryTranslatorImpl.parse(QueryTranslatorImpl.java:290)
	at org.hibernate.hql.internal.ast.QueryTranslatorImpl.doCompile(QueryTranslatorImpl.java:189)
	at org.hibernate.hql.internal.ast.QueryTranslatorImpl.compile(QueryTranslatorImpl.java:144)
	at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:113)
	at org.hibernate.engine.query.spi.HQLQueryPlan.<init>(HQLQueryPlan.java:73)
	at org.hibernate.engine.query.spi.QueryPlanCache.getHQLQueryPlan(QueryPlanCache.java:155)
	at org.hibernate.internal.AbstractSharedSessionContract.getQueryPlan(AbstractSharedSessionContract.java:600)
	at org.hibernate.internal.AbstractSharedSessionContract.createQuery(AbstractSharedSessionContract.java:709)
	at org.hibernate.internal.AbstractSessionImpl.createQuery(AbstractSessionImpl.java:23)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:368)
	at com.sun.proxy.$Proxy148.createQuery(Unknown Source)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:314)
	at com.sun.proxy.$Proxy148.createQuery(Unknown Source)
	at com.xxy.rbac_cloud_service_platform.repository.rule.RdbcRuleRepositoryAdapter.getByApp(RdbcRuleRepositoryAdapter.java:147)
	at com.xxy.rbac_cloud_service_platform.repository.rule.RdbcRuleRepositoryAdapter.findAllByApp(RdbcRuleRepositoryAdapter.java:193)
	at com.xxy.rbac_cloud_service_platform.repository.rule.RdbcRuleRepositoryAdapter$$FastClassBySpringCGLIB$$8217752c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:685)
	at com.xxy.rbac_cloud_service_platform.repository.rule.InMemFlowRuleStore$$EnhancerBySpringCGLIB$$65cee6d.findAllByApp(<generated>)
	at com.xxy.RuleTest.testSaveMertic(RuleTest.java:44)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:74)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:84)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.junit.runner.JUnitCore.run(JUnitCore.java:137)
	at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:68)
	at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:33)
	at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:230)
	at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:58)
2020-05-17 14:38:27,638 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 14:38:27,673 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:38:27,704 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 14:38:27,712 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
2020-05-17 14:40:03,501 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'application-dev.yml', group: 'DEFAULT_GROUP', data: # 加解密根密码
jasypt:
  encryptor:
    password: pig #根密码

# Spring 相关
spring:
  redis:
    password: xxy_zlq_26878
    host: rbac-cloud-redis

# 暴露监控端点
management:
  endpoints:
    web:
      exposure:
        include: '*'

# feign 配置
feign:
  hystrix:
    enabled: true
  okhttp:
    enabled: true
  httpclient:
    enabled: false
  client:
    config:
      default:
        connectTimeout: 10000
        readTimeout: 10000
  compression:
    request:
      enabled: true
    response:
      enabled: true

# hystrix 配置
hystrix:
  command:
    default:
      execution:
        isolation:
          strategy: SEMAPHORE
          thread:
            timeoutInMilliseconds: 60000
  shareSecurityContext: true

#请求处理的超时时间
ribbon:
  ReadTimeout: 10000
  ConnectTimeout: 10000

# mybaits-plus配置
mybatis-plus:
  mapper-locations: classpath:/mapper/*Mapper.xml
  global-config:
    banner: false
    db-config:
      id-type: auto
      table-underline: true
      logic-delete-value: 1
      logic-not-delete-value: 0
  configuration:
    map-underscore-to-camel-case: true

# spring security 配置
security:
  oauth2:
    resource:
      loadBalanced: true
      token-info-uri: http://rbac-cloud-auth/oauth/check_token

# swagger 配置
swagger:
  title: RBAC Swagger API
  license: Powered By rbac_cloud
  licenseUrl: https://rbac_cloud.com
  terms-of-service-url: https://rbac_cloud.com
  contact:
    email: 1150809340@qq.com
    url: https://rbac_cloud.com
  authorization:
    name: rbac_cloud OAuth
    auth-regex: ^.*$
    authorization-scope-list:
      - scope: server
        description: server all
    token-url-list:
      - http://${GATEWAY-HOST:rbac-cloud-gateway}:${GATEWAY-PORT:9999}/auth/oauth/token
2020-05-17 14:40:03,515 [main] INFO  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:91 - Loading nacos data, dataId: 'rbac-cloud-service-platform', group: 'DEFAULT_GROUP', data: security:
  oauth2:
    client:
      client-id: ENC(imENTO7M8bLO38LFSIxnzw==)
      client-secret: ENC(i3cDFhs26sa2Ucrfz2hnQw==)
      scope: server

# 数据源
spring:
  datasource:
    type: com.zaxxer.hikari.HikariDataSource
    driver-class-name: com.mysql.jdbc.Driver
    username: root
    password: rbac2020
    url: jdbc:mysql://rbac-cloud-mysql:3306/rbac_cloud_service_monitor?characterEncoding=utf8&zeroDateTimeBehavior=convertToNull&useSSL=false&allowMultiQueries=true&useJDBCCompliantTimezoneShift=true&useLegacyDatetimeCode=false&serverTimezone=Asia/Shanghai 
  jpa: 
    hibernate: 
      ddl-auto: none 
      use-new-id-generator-mappings: false
      

# 直接放行URL
ignore:
  urls:
    - /v2/api-docs
    - /actuator/**
    - /user/info/*
    - /log/**

2020-05-17 14:40:03,520 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform.yml] & group[DEFAULT_GROUP]
2020-05-17 14:40:03,523 [main] WARN  [c.a.cloud.nacos.client.NacosPropertySourceBuilder] NacosPropertySourceBuilder.java:86 - Ignore the empty nacos configuration and get it based on dataId[rbac-cloud-service-platform-dev.yml] & group[DEFAULT_GROUP]
2020-05-17 14:40:03,524 [main] INFO  [o.s.c.b.c.PropertySourceBootstrapConfiguration] PropertySourceBootstrapConfiguration.java:109 - Located property source: [BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform-dev.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform.yml'}, BootstrapPropertySource {name='bootstrapProperties-rbac-cloud-service-platform'}, BootstrapPropertySource {name='bootstrapProperties-application-dev.yml'}]
2020-05-17 14:40:03,542 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesConfiguration] EnableEncryptablePropertiesConfiguration.java:69 - Bootstraping jasypt-string-boot auto configuration in context: rbac-cloud-service-platform-1
2020-05-17 14:40:03,542 [main] INFO  [com.xxy.RuleTest] SpringApplication.java:655 - The following profiles are active: dev
2020-05-17 14:40:04,441 [main] INFO  [o.s.context.annotation.AutoProxyRegistrar] AutoProxyRegistrar.java:82 - AutoProxyRegistrar was imported but no annotations were found having both 'mode' and 'proxyTargetClass' attributes of type AdviceMode and boolean respectively. This means that auto proxy creator registration and configuration may not have occurred as intended, and components may not be proxied as expected. Check to ensure that AutoProxyRegistrar has been @Import'ed on the same class where these annotations are declared; otherwise remove the import of AutoProxyRegistrar altogether.
2020-05-17 14:40:04,735 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-config' contains invalid characters, please migrate to a valid format.
2020-05-17 14:40:04,743 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'nacos-discovery' contains invalid characters, please migrate to a valid format.
2020-05-17 14:40:05,211 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:40:05,213 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2020-05-17 14:40:05,249 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 23ms. Found 0 JPA repository interfaces.
2020-05-17 14:40:05,270 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:249 - Multiple Spring Data modules found, entering strict repository configuration mode!
2020-05-17 14:40:05,271 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:127 - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2020-05-17 14:40:05,286 [main] INFO  [o.s.d.r.config.RepositoryConfigurationDelegate] RepositoryConfigurationDelegate.java:187 - Finished Spring Data repository scanning in 5ms. Found 0 Redis repository interfaces.
2020-05-17 14:40:05,404 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'service-registry' contains invalid characters, please migrate to a valid format.
2020-05-17 14:40:05,427 [main] WARN  [o.springframework.boot.actuate.endpoint.EndpointId] EndpointId.java:155 - Endpoint ID 'hystrix.stream' contains invalid characters, please migrate to a valid format.
2020-05-17 14:40:05,618 [main] INFO  [o.springframework.cloud.context.scope.GenericScope] GenericScope.java:295 - BeanFactory id=52c9e147-e477-3dc4-b587-9fcb00067486
2020-05-17 14:40:05,914 [main] INFO  [c.u.j.c.EnableEncryptablePropertiesBeanFactoryPostProcessor] EnableEncryptablePropertiesBeanFactoryPostProcessor.java:50 - Post-processing PropertySource instances
2020-05-17 14:40:05,933 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:40:05,933 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:40:05,934 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-rbac-cloud-service-platform [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:40:05,934 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource bootstrapProperties-application-dev.yml [org.springframework.cloud.bootstrap.config.BootstrapPropertySource] to EncryptableEnumerablePropertySourceWrapper
2020-05-17 14:40:05,935 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource configurationProperties [org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertySource] to AOP Proxy
2020-05-17 14:40:05,935 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource Inlined Test Properties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:40:05,936 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemProperties [org.springframework.core.env.PropertiesPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:40:05,936 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource systemEnvironment [org.springframework.boot.env.SystemEnvironmentPropertySourceEnvironmentPostProcessor$OriginAwareSystemEnvironmentPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:40:05,936 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource random [org.springframework.boot.env.RandomValuePropertySource] to EncryptablePropertySourceWrapper
2020-05-17 14:40:05,937 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudClientHostInfo [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:40:05,937 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource applicationConfig: [classpath:/application.properties] [org.springframework.boot.env.OriginTrackedMapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:40:05,938 [main] INFO  [c.u.j.EncryptablePropertySourceConverter] EncryptablePropertySourceConverter.java:38 - Converting PropertySource springCloudDefaultProperties [org.springframework.core.env.MapPropertySource] to EncryptableMapPropertySourceWrapper
2020-05-17 14:40:05,961 [main] INFO  [c.u.j.filter.DefaultLazyPropertyFilter] DefaultLazyPropertyFilter.java:31 - Property Filter custom Bean not found with name 'encryptablePropertyFilter'. Initializing Default Property Filter
2020-05-17 14:40:06,119 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:40:06,553 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration' of type [org.springframework.security.config.annotation.configuration.ObjectPostProcessorConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:40:06,563 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'objectPostProcessor' of type [org.springframework.security.config.annotation.configuration.AutowireBeanFactoryObjectPostProcessor] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:40:06,567 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler@32ba5c65' of type [org.springframework.security.oauth2.provider.expression.OAuth2MethodSecurityExpressionHandler] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:40:06,585 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration' of type [org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:40:06,598 [main] INFO  [o.s.c.s.PostProcessorRegistrationDelegate$BeanPostProcessorChecker] PostProcessorRegistrationDelegate.java:330 - Bean 'methodSecurityMetadataSource' of type [org.springframework.security.access.method.DelegatingMethodSecurityMetadataSource] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2020-05-17 14:40:06,664 [main] INFO  [c.u.j.resolver.DefaultLazyPropertyResolver] DefaultLazyPropertyResolver.java:31 - Property Resolver custom Bean not found with name 'encryptablePropertyResolver'. Initializing Default Property Resolver
2020-05-17 14:40:06,664 [main] INFO  [c.u.j.detector.DefaultLazyPropertyDetector] DefaultLazyPropertyDetector.java:30 - Property Detector custom Bean not found with name 'encryptablePropertyDetector'. Initializing Default Property Detector
2020-05-17 14:40:07,390 [main] INFO  [org.hibernate.jpa.internal.util.LogHelper] LogHelper.java:31 - HHH000204: Processing PersistenceUnitInfo [name: default]
2020-05-17 14:40:07,537 [main] INFO  [org.hibernate.Version] Version.java:46 - HHH000412: Hibernate Core {5.4.9.Final}
2020-05-17 14:40:07,809 [main] INFO  [org.hibernate.annotations.common.Version] JavaReflectionManager.java:49 - HCANN000001: Hibernate Commons Annotations {5.1.0.Final}
2020-05-17 14:40:08,070 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:110 - HikariPool-1 - Starting...
2020-05-17 14:40:08,076 [main] WARN  [com.zaxxer.hikari.util.DriverDataSource] DriverDataSource.java:70 - Registered driver with driverClassName=com.mysql.jdbc.Driver was not found, trying direct instantiation.
2020-05-17 14:40:08,784 [main] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:123 - HikariPool-1 - Start completed.
2020-05-17 14:40:08,815 [main] INFO  [org.hibernate.dialect.Dialect] Dialect.java:172 - HHH000400: Using dialect: org.hibernate.dialect.MySQL57Dialect
2020-05-17 14:40:10,178 [main] INFO  [o.h.e.t.jta.platform.internal.JtaPlatformInitiator] JtaPlatformInitiator.java:52 - HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2020-05-17 14:40:10,189 [main] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:416 - Initialized JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 14:40:11,015 [main] WARN  [o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration] JpaBaseConfiguration.java:220 - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2020-05-17 14:40:11,233 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:40:11,234 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:40:11,254 [main] INFO  [com.netflix.config.DynamicPropertyFactory] DynamicPropertyFactory.java:281 - DynamicPropertyFactory is initialized with configuration sources: com.netflix.config.ConcurrentCompositeConfiguration@1c8e4810
2020-05-17 14:40:11,412 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:32 - String Encryptor custom Bean not found with name 'jasyptStringEncryptor'. Initializing Default String Encryptor
2020-05-17 14:40:11,435 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.algorithm, using default value: PBEWithMD5AndDES
2020-05-17 14:40:11,436 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.keyObtentionIterations, using default value: 1000
2020-05-17 14:40:11,436 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.poolSize, using default value: 1
2020-05-17 14:40:11,437 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerName, using default value: null
2020-05-17 14:40:11,438 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.providerClassName, using default value: null
2020-05-17 14:40:11,439 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.saltGeneratorClassname, using default value: org.jasypt.salt.RandomSaltGenerator
2020-05-17 14:40:11,440 [main] INFO  [c.u.j.encryptor.DefaultLazyEncryptor] DefaultLazyEncryptor.java:58 - Encryptor config not found for property jasypt.encryptor.stringOutputType, using default value: base64
2020-05-17 14:40:12,187 [main] WARN  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:121 - No URLs will be polled as dynamic configuration sources.
2020-05-17 14:40:12,188 [main] INFO  [com.netflix.config.sources.URLConfigurationSource] URLConfigurationSource.java:122 - To enable URLs as dynamic configuration sources, define System property archaius.configurationSource.additionalUrls or make config.properties available on classpath.
2020-05-17 14:40:12,632 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService 'applicationTaskExecutor'
2020-05-17 14:40:13,437 [main] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskScheduler] ExecutorConfigurationSupport.java:171 - Initializing ExecutorService
2020-05-17 14:40:15,353 [main] INFO  [o.s.security.web.DefaultSecurityFilterChain] DefaultSecurityFilterChain.java:43 - Creating filter chain: any request, [org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@66e17bf2, org.springframework.security.web.context.SecurityContextPersistenceFilter@3f1bde96, org.springframework.security.web.header.HeaderWriterFilter@2d95c3ef, org.springframework.security.web.authentication.logout.LogoutFilter@35007b7a, org.springframework.security.oauth2.provider.authentication.OAuth2AuthenticationProcessingFilter@34ec33f4, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@2cf88ae1, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@df80af2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@3593e8dd, org.springframework.security.web.session.SessionManagementFilter@71390c8, org.springframework.security.web.access.ExceptionTranslationFilter@15beb40b, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@9e2946]
2020-05-17 14:40:16,100 [main] WARN  [o.s.cloud.netflix.core.CoreAutoConfiguration] CoreAutoConfiguration.java:37 - This module is deprecated. It will be removed in the next major release. Please use spring-cloud-netflix-hystrix instead.
2020-05-17 14:40:16,150 [main] INFO  [o.s.b.actuate.endpoint.web.EndpointLinksResolver] EndpointLinksResolver.java:58 - Exposing 21 endpoint(s) beneath base path '/actuator'
2020-05-17 14:40:16,278 [main] INFO  [com.xxy.RuleTest] StartupInfoLogger.java:61 - Started RuleTest in 15.118 seconds (JVM running for 17.066)
2020-05-17 15:08:07,633 [HikariPool-1 housekeeper] WARN  [com.zaxxer.hikari.pool.HikariPool] HikariPool.java:787 - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=27m58s724ms410µs871ns).
2020-05-17 15:08:07,689 [SpringContextShutdownHook] INFO  [o.s.scheduling.concurrent.ThreadPoolTaskExecutor] ExecutorConfigurationSupport.java:208 - Shutting down ExecutorService 'applicationTaskExecutor'
2020-05-17 15:08:07,719 [SpringContextShutdownHook] INFO  [o.s.orm.jpa.LocalContainerEntityManagerFactoryBean] AbstractEntityManagerFactoryBean.java:598 - Closing JPA EntityManagerFactory for persistence unit 'default'
2020-05-17 15:08:07,746 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:350 - HikariPool-1 - Shutdown initiated...
2020-05-17 15:08:07,759 [SpringContextShutdownHook] INFO  [com.zaxxer.hikari.HikariDataSource] HikariDataSource.java:352 - HikariPool-1 - Shutdown completed.
